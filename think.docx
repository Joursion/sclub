使用ｋｏａ写一个校园平台

功能：　二手交易，广告，发起活动

２０１６．０２．１６　
设计数据库，和大致路由

//2016.02.18
设计邮箱激活，时限为一天，未激活的话，登陆后跳转到激活页面。

2016.02.19
设计注册页面
name: {type: String, required: true},
email: {type: String, required: true},
state: {type: Number},　//标记是否已经进行邮箱激活
password: {type: String, required: true},
reg_date: {type: Date, required: Date.now},
last_login: {type: Date, required: Date.now}

邮箱，用户名，密码。

mongodb的读的速度和redis等差不多，所以没必要加cache，你的问题是朋友圈，当大量用户拉feed时，比如30w用户，1年1亿挑以上，怕查询速度慢下来。
那最好的做法就是搜索引擎来存放数据，用于查看历史记录接口查看，热数据放到redis里，新数据仍旧走mongodb就足够快，足够扩展了

glyphicon glyphicon-heart
glyphicon glyphicon-heart-empty
glyphicon glyphicon-comment
glyphicon glyphicon-eye-open

2016.02.23 
暂无解决办法：
１．表单重复提交？　express-rate-limit ?
２．Footer 问题？
３．cache 问题？
 4.  分页问题？  －－－－－－－－－－－－－－－－－－－－－－
5. 头像？
6. 身份验证？
7. 邮箱验证？


2016.02.25

一个页面多个提交，可以使用ajax，但是不要把submit　写在表单里面，直接用button写onclick事件，，
如果对应的路由没有渲染页面，需要进行重定向，否则会出现404错误。



功能进度（server）

－支持markdown
－支持图片上传　
－消息系统设计
　　　　１．消息的发送者：this.session.user
　　　　２．消息的接受者：　good/activity/user;
　　　　３．content: “回复了你的××：<a>”
           4.推送：每个页面的刷新之后，直接yield 来进行遍历数据库
           5. localhost:3000/u/:id/message 来进行获取当前的消息
　　　６． 有一个按钮完成，全部已读的功能，
　　　７．阅读完消息之后进行删除(没有思路。。。

Activity:
－发布　＋
－编辑　＋
－参加　＋，　（参加的判定还没有完成，目前就写了参加的录入）／／返回的是数组，若没有数据，则数组为空
－退出参加  +
－评论　＋
－首页加载　＋
－删除 　
－统计　
－人员加载？ 　

Goods:
－发布　＋
－编辑　＋
－评论　＋
－首页加载　＋
－删除
－统计　＋
－star　
-unstar　
－标签查询。

User
－信息修改
－查看参加 + 
－查看star
－修改头像？
－查看发布 +

Discovry:
-发布
-编辑
－评论






